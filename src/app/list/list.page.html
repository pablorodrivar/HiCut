<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/tabs/home"></ion-back-button>      
    </ion-buttons>
    <ion-buttons slot="end">
      <ion-button (click)="presentModal()">
        <ion-icon slot="icon-only" name="funnel"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>{{ 'PAGES.LIST.TITLE' | translate }}</ion-title>
    <ion-title *ngIf="list_id == 1"><div class="subtitle">{{ 'PAGES.LIST.FOR_MEN' | translate }}</div></ion-title>
    <ion-title *ngIf="list_id == 2"><div class="subtitle">{{ 'PAGES.LIST.FOR_WOMEN' | translate }}</div></ion-title>
    <ion-title *ngIf="list_id == 3"><div class="subtitle">{{ 'PAGES.LIST.ALL' | translate }}</div></ion-title>
  </ion-toolbar>


</ion-header>
<ion-content>
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content
      pullingIcon="arrow-dropdown"
      pullingText="Pull to refresh"
      refreshingSpinner="circles"
      refreshingText="Refreshing...">
    </ion-refresher-content>
  </ion-refresher>

  <!-- <ion-buttons> <button ion-button item-right (click)=“refreshData()”> <ion-icon name=“refresh”></ion-icon> </button> </ion-buttons> -->

  <ion-item lines="none" color="tertiary" style="color: white">
      <ion-label>Search Filter</ion-label>         
  </ion-item>
  <ion-item lines="none" color="tertiary" style="color: white">
    <ion-chip outline color="medium"><ion-icon name="walk" color="light"></ion-icon><ion-label color="light" class="chip-text">< {{ mdChipText }} km.</ion-label></ion-chip>
    <ion-chip outline color="medium"><ion-icon name="compass" color="light"></ion-icon><ion-label color="light" class="chip-text">{{ locChipText }}</ion-label></ion-chip>
    <ion-chip outline *ngIf="sort_opt == 'dist'" color="medium"><ion-icon name="train" color="light"></ion-icon><ion-label color="light" class="chip-text">{{ 'PAGES.LIST.SORT_BY' | translate }} {{ 'PAGES.LIST.DISTANCE' | translate }}</ion-label></ion-chip>
    <ion-chip outline *ngIf="sort_opt == 'rat'" color="medium"><ion-icon name="star" color="light"></ion-icon><ion-label color="light" class="chip-text">{{ 'PAGES.LIST.SORT_BY' | translate }} {{ 'PAGES.LIST.RATING' | translate }}</ion-label></ion-chip>
    <ion-chip outline *ngIf="sort_opt == 'alp'" color="medium"><ion-icon name="book" color="light"></ion-icon><ion-label color="light" class="chip-text">{{ 'PAGES.LIST.SORT_BY' | translate }} {{ 'PAGES.LIST.ALPHA' | translate }}</ion-label></ion-chip>        
  </ion-item>
  <ion-item *ngIf="services.length > 0" lines="none" color="tertiary" style="color: white">
    <ion-chip color="medium"><ion-icon name="cut" color="light"></ion-icon><ion-label color="light" class="chip-text">{{ services_names }}</ion-label></ion-chip>
  </ion-item>  

  <ion-searchbar animated (ionChange)="searchBrb($event)"></ion-searchbar>
  <div
    class="search-results"
    infiniteScroll
    [infiniteScrollDistance]="2"
    [infiniteScrollThrottle]="50"
    (scrolled)="onScroll()"
  >            

    <!-- | filter: searchText -->
    <ion-card *ngFor="let brb of brbshops | filter: searchText" (click)="toDetail(brb.brb.id)">
      <ion-card-header>
        <ion-card-title>{{ brb.brb.name }}            
          <ion-chip outline color="secondary"><ion-icon name="walk"></ion-icon><ion-label>{{ brb.dist }} km.</ion-label></ion-chip>
        </ion-card-title>         
        <div *ngIf="brb.rate.stars >= 0 && brb.rate.stars < 0.5"><ion-icon name="star-outline"></ion-icon><ion-icon name="star-outline"></ion-icon><ion-icon name="star-outline"></ion-icon><ion-icon name="star-outline"></ion-icon><ion-icon name="star-outline"></ion-icon> ({{ brb.rate.total }} {{ 'PAGES.LIST.VALUATIONS' | translate }})</div>
        <div *ngIf="brb.rate.stars >= 0.5 && brb.rate.stars < 1"><ion-icon name="star-half"></ion-icon><ion-icon name="star-outline"></ion-icon><ion-icon name="star-outline"></ion-icon><ion-icon name="star-outline"></ion-icon><ion-icon name="star-outline"></ion-icon> ({{ brb.rate.total }} {{ 'PAGES.LIST.VALUATIONS' | translate }})</div>
        <div *ngIf="brb.rate.stars >= 1 && brb.rate.stars < 1.35"><ion-icon name="star"></ion-icon><ion-icon name="star-outline"></ion-icon><ion-icon name="star-outline"></ion-icon><ion-icon name="star-outline"></ion-icon><ion-icon name="star-outline"></ion-icon> ({{ brb.rate.total }} {{ 'PAGES.LIST.VALUATIONS' | translate }})</div>
        <div *ngIf="brb.rate.stars >= 1.35 && brb.rate.stars < 1.85"><ion-icon name="star"></ion-icon><ion-icon name="star-half"></ion-icon><ion-icon name="star-outline"></ion-icon><ion-icon name="star-outline"></ion-icon><ion-icon name="star-outline"></ion-icon> ({{ brb.rate.total }} {{ 'PAGES.LIST.VALUATIONS' | translate }})</div>  
        <div *ngIf="brb.rate.stars >= 1.85 && brb.rate.stars < 2.35"><ion-icon name="star"></ion-icon><ion-icon name="star"></ion-icon><ion-icon name="star-outline"></ion-icon><ion-icon name="star-outline"></ion-icon><ion-icon name="star-outline"></ion-icon> ({{ brb.rate.total }} {{ 'PAGES.LIST.VALUATIONS' | translate }})</div>
        <div *ngIf="brb.rate.stars >= 2.35 && brb.rate.stars < 2.85"><ion-icon name="star"></ion-icon><ion-icon name="star"></ion-icon><ion-icon name="star-half"></ion-icon><ion-icon name="star-outline"></ion-icon><ion-icon name="star-outline"></ion-icon> ({{ brb.rate.total }} {{ 'PAGES.LIST.VALUATIONS' | translate }})</div>         
        <div *ngIf="brb.rate.stars >= 2.85 && brb.rate.stars < 3.35"><ion-icon name="star"></ion-icon><ion-icon name="star"></ion-icon><ion-icon name="star"></ion-icon><ion-icon name="star-outline"></ion-icon><ion-icon name="star-outline"></ion-icon> ({{ brb.rate.total }} {{ 'PAGES.LIST.VALUATIONS' | translate }})</div>         
        <div *ngIf="brb.rate.stars >= 3.35 && brb.rate.stars < 3.85"><ion-icon name="star"></ion-icon><ion-icon name="star"></ion-icon><ion-icon name="star"></ion-icon><ion-icon name="star-half"></ion-icon><ion-icon name="star-outline"></ion-icon> ({{ brb.rate.total }} {{ 'PAGES.LIST.VALUATIONS' | translate }})</div>         
        <div *ngIf="brb.rate.stars >= 3.85 && brb.rate.stars < 4.35"><ion-icon name="star"></ion-icon><ion-icon name="star"></ion-icon><ion-icon name="star"></ion-icon><ion-icon name="star"></ion-icon><ion-icon name="star-outline"></ion-icon> ({{ brb.rate.total }} {{ 'PAGES.LIST.VALUATIONS' | translate }})</div>         
        <div *ngIf="brb.rate.stars >= 4.35 && brb.rate.stars < 4.85"><ion-icon name="star"></ion-icon><ion-icon name="star"></ion-icon><ion-icon name="star"></ion-icon><ion-icon name="star"></ion-icon><ion-icon name="star-half"></ion-icon> ({{ brb.rate.total }} {{ 'PAGES.LIST.VALUATIONS' | translate }})</div>   
        <div *ngIf="brb.rate.stars >= 4.85 && brb.rate.stars <= 5"><ion-icon name="star"></ion-icon><ion-icon name="star"></ion-icon><ion-icon name="star"></ion-icon><ion-icon name="star"></ion-icon><ion-icon name="star"></ion-icon> ({{ brb.rate.total }} {{ 'PAGES.LIST.VALUATIONS' | translate }})</div>   
      </ion-card-header>

      <ion-item>
        <img src="http://80.211.65.79:8000/{{ brb.brb.imglist[0] }}" class="brb-img">
      </ion-item>      

      <ion-item color="primary" lines="none">
        <ion-label>{{ brb.brb.address }}</ion-label>
        <ion-icon name="compass"></ion-icon>
      </ion-item>
    </ion-card>
  </div>
</ion-content>
